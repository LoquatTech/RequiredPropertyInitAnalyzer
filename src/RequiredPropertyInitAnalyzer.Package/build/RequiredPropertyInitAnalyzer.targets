<Project>

  <PropertyGroup>
    <RequiredInitAttributePath Condition="'$(RequiredInitAttributePath)' == ''">$(MSBuildThisFileDirectory)RequiredInitAttribute(DefaultLanguageSourceExtension)</RequiredInitAttributePath>

    <IncludeRequiredAttributes Condition="'$(IncludeRequiredAttributes)' == '' and Exists($(RequiredInitAttributePath))">true</IncludeRequiredAttributes>
  </PropertyGroup>

  <ItemGroup Condition="'$(IncludeRequiredAttributes)' == 'true' and Exists($(RequiredInitAttributePath))">
    <Compile Include="$(RequiredInitAttributePath)" Visible="false" />

    
   <!--Workaround for https://github.com/dotnet/wpf/issues/810--> 
    <_GeneratedCodeFiles Include="$(RequiredInitAttributePath)" Visible="false" Condition="'$(UseWPF)' == 'true'" />
  </ItemGroup>

  <Target Name="OwnershipAttributesRequestedForUnsupportedLanguage"
          Condition="'$(IncludeRequiredAttributes)' == 'true' and !Exists($(RequiredInitAttributePath))"
          BeforeTargets="Compile">

    <Warning Code="IDISP026" Text="The project specifies &lt;IncludeRequiredAttributes&gt;true&lt;/IncludeRequiredAttributes&gt;, but including attributes in this language is not yet supported." />
  </Target>

</Project>